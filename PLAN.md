# План реализации: Генератор описания для каталогов и выставок

## Этап 1: Настройка проекта и базовая структура ✅

### 1.1. Инициализация проекта ✅
- ✅ Создана структура проекта на Next.js 15
- ✅ Выбран технологический стек: Next.js 15 + React 18
- ✅ Настроен Next.js с App Router
- ✅ Настроена базовая структура папок:
  - `app/` - страницы и компоненты (App Router)
  - `app/components/` - React компоненты
  - `lib/` - утилиты и вспомогательные функции
  - `public/` - статические ресурсы

### 1.2. Базовая структура Next.js ✅
- ✅ Создан `app/layout.js` - корневой layout с метаданными
- ✅ Создан `app/page.js` - главная страница
- ✅ Настроены базовые стили (`app/globals.css`) и CSS Modules
- ✅ Подготовлена адаптивная разметка
- ✅ Настроен `next.config.js`

## Этап 2: Компонент загрузки изображения ✅

### 2.1. UI для загрузки ✅
- ✅ Создать Client Component в `app/components/ImageUpload.jsx` (использовать 'use client')
- ✅ Реализовать drag-and-drop или стандартный input file
- ✅ Добавить визуальную обратную связь при загрузке
- ✅ Валидация форматов (JPG, PNG)
- ✅ Использовать CSS Modules для стилизации компонента

### 2.2. Обработка изображения ✅
- ✅ Реализовать чтение файла с помощью FileReader API
- ✅ Отображение превью загруженного изображения
- ✅ Сохранение изображения в состоянии приложения (useState)
- ✅ Конвертация изображения в base64 для отправки в AI API (если необходимо)

## Этап 3: Форма ввода данных ✅

### 3.1. Поля ввода ✅
- ✅ Создать Client Component формы в `app/components/ArtworkForm.jsx`
- ✅ Поле для названия (текстовый ввод)
- ✅ Поле для размера (ширина × высота) - два поля или одно с разделителем
- ✅ Поле для техники (текстовый ввод или выпадающий список)
- ✅ Валидация обязательных полей
- ✅ Использовать управляемые компоненты (controlled components) с useState

### 3.2. Кнопка генерации названий ✅
- ✅ Создать кнопку "Сгенерировать названия"
- ✅ Подготовить UI для отображения списка предложенных названий
- ✅ Реализовать выбор одного из вариантов
- ✅ Добавить состояние загрузки (loading state) при генерации

## Этап 4: Интеграция с AI для генерации названий ✅

### 4.1. Настройка AI API ✅
- ✅ Выбрать AI-сервис (OpenAI, Anthropic, или другой)
- ✅ Настроить API ключи через переменные окружения (`.env.local`)
- ✅ Создать API Route в `app/api/generate-titles/route.js` (Server Route)
- ✅ Создать утилиту для работы с AI API в `lib/ai-client.js`

### 4.2. Реализация генерации названий ✅
- ✅ Создать Server Action или API Route для отправки изображения и запроса названий
- ✅ Обработать ответ API (получить 3-5 вариантов названий)
- ✅ Отобразить варианты в интерфейсе (Client Component)
- ✅ Реализовать выбор названия из списка
- ✅ Добавить обработку ошибок и состояния загрузки

## Этап 5: Генерация карточки параметров ✅

### 5.1. Логика формирования ✅
- ✅ Создать функцию для сборки данных карточки параметров в `lib/card-utils.js`
- ✅ Проверка заполненности всех обязательных полей
- ✅ Валидация данных перед генерацией карточки

### 5.2. UI карточки параметров ✅
- ✅ Создать компонент `app/components/ParameterCard.jsx` (Client Component)
- ✅ Оформить визуально (шрифты, цвета, иконки) с использованием CSS Modules
- ✅ Отобразить: название, размер, технику
- ✅ Сделать адаптивным для мобильных и десктопных устройств
- ✅ Использовать стиль, близкий к каталогам галерей

## Этап 6: Генерация карточки описания ✅

### 6.1. Интеграция с AI для описания ✅
- ✅ Создать API Route в `app/api/generate-description/route.js` (Server Route)
- ✅ Создать функцию для генерации описания на основе изображения и данных (уже была в `lib/ai-client.js`)
- ✅ Отправить запрос в AI API с изображением и контекстом (название, размер, техника)
- ✅ Обработать ответ и получить краткое описание
- ✅ Добавить обработку ошибок

### 6.2. UI карточки описания ✅
- ✅ Создать компонент `app/components/DescriptionCard.jsx` (Client Component)
- ✅ Оформить визуально (читаемость, атмосфера, стиль каталога) с CSS Modules
- ✅ Отобразить сгенерированное описание
- ✅ Добавить состояние загрузки при генерации
- ✅ Сделать адаптивным для мобильных и десктопных устройств

## Этап 7: Заглушки для будущих функций ✅

### 7.1. Кнопка "Настройки" ✅
- ✅ Создать компонент `app/components/SettingsButton.jsx` (Client Component)
- ✅ Реализовать открытие панели настроек (заглушка) с использованием состояния
- ✅ Подготовить структуру для будущих настроек (язык, стиль описания и т.д.)
- ✅ Использовать CSS Modules для стилизации

### 7.2. Кнопка "Копировать текст" ✅
- ✅ Создать компонент `app/components/CopyButton.jsx` (Client Component)
- ✅ Реализовать функциональность копирования в буфер обмена (navigator.clipboard API)
- ✅ Добавить визуальную обратную связь при копировании

### 7.3. Кнопка "Поделиться" ✅
- ✅ Создать компонент `app/components/ShareButton.jsx` (Client Component)
- ✅ Реализовать заглушку с базовым UI
- ✅ Подготовить структуру для будущей интеграции с Web Share API

## Этап 8: Стилизация и UX ✅

### 8.1. Общая стилизация ✅
- ✅ Применить единый дизайн-стиль (близкий к каталогам галерей)
- ✅ Использовать CSS переменные из `app/globals.css` для цветовой палитры
- ✅ Добавить анимации и переходы (CSS transitions/animations)
- ✅ Улучшить визуальную иерархию
- ✅ Использовать CSS Modules для каждого компонента

### 8.2. Адаптивность ✅
- ✅ Протестировать на мобильных устройствах (responsive design)
- ✅ Протестировать на десктопных устройствах
- ✅ Убедиться в корректном отображении на разных размерах экрана
- ✅ Использовать медиа-запросы в CSS Modules

## Этап 9: Тестирование

### 9.1. Функциональное тестирование
- Проверить загрузку различных форматов изображений (JPG, PNG)
- Протестировать генерацию названий на реальных изображениях
- Протестировать генерацию описаний на различных изображениях
- Проверить работу всех кнопок и форм

### 9.2. Кроссбраузерное тестирование
- Протестировать в Chrome
- Протестировать в Firefox
- Протестировать в Safari (если возможно)

### 9.3. Тестирование юзабилити
- Проверить удобство ввода данных
- Проверить процесс выбора названия
- Проверить отображение карточек
- Убедиться в интуитивности интерфейса

*Рекомендации по тестированию и команда сборки приведены в README.md.*

## Этап 10: Финальная полировка ✅

### 10.1. Оптимизация ✅
- Превью изображения использует data URL (next/image для динамического base64 не применяется) — текущая реализация корректна
- Кнопки генерации блокируются на время запроса (доп. debouncing не требуется)
- Производительность и размер бандла проверяются через `npm run build` (отчёт Next.js)

### 10.2. Документация ✅
- Добавлены JSDoc комментарии для компонентов: ImageUpload, ArtworkForm, ParameterCard, DescriptionCard
- README.md обновлён: полная структура проекта, API Routes, lib, инструкции по запуску
- В README добавлен раздел «Тестирование и оптимизация»

### 10.3. Финальная проверка
- Проверить соответствие MVP-требованиям
- Убедиться, что все функции работают корректно (ручное тестирование и `npm run build`)

---

## Примечания

- Все этапы можно выполнять последовательно или параллельно (где это возможно)
- При работе с AI API необходимо учитывать лимиты и стоимость запросов
- Важно обеспечить обработку ошибок на всех этапах
- Использовать Next.js App Router с разделением на Server Components и Client Components
- Client Components помечать директивой 'use client' в начале файла
- API Routes создавать в `app/api/` для серверной логики
- Использовать CSS Modules для стилизации компонентов
- Переменные окружения хранить в `.env.local` (не коммитить в git)
- Следовать современным практикам разработки (компонентный подход, модульность, типизация)
